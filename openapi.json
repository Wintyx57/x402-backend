{
  "openapi": "3.1.0",
  "info": {
    "title": "x402 Bazaar API",
    "description": "The decentralized API marketplace where AI agents pay with USDC via HTTP 402 protocol. Free endpoints return data directly. Paid endpoints return HTTP 402 with payment details (wallet address, amount in USDC, supported chains). To use paid endpoints, send USDC on Base to the specified wallet, then retry with X-Payment-TxHash header. 41 total endpoints available â€” this schema covers the 30 most popular ones.",
    "version": "2.0.0",
    "contact": {
      "name": "x402 Bazaar",
      "url": "https://x402bazaar.org"
    },
    "license": {
      "name": "MIT",
      "url": "https://github.com/Wintyx57/x402-backend/blob/main/LICENSE"
    }
  },
  "servers": [
    {
      "url": "https://x402-api.onrender.com",
      "description": "Production (Base mainnet)"
    }
  ],
  "paths": {
    "/": {
      "get": {
        "operationId": "getMarketplaceInfo",
        "summary": "Get marketplace info",
        "description": "Returns marketplace name, description, total services count, all 41 available endpoints with prices, and protocol info. Free endpoint.",
        "responses": {
          "200": {
            "description": "Marketplace information",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/MarketplaceInfo" } } }
          }
        }
      }
    },
    "/health": {
      "get": {
        "operationId": "healthCheck",
        "summary": "Health check",
        "description": "Returns server health status and supported blockchain networks. Free endpoint.",
        "responses": {
          "200": {
            "description": "Health status",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/HealthResponse" } } }
          }
        }
      }
    },
    "/api/status": {
      "get": {
        "operationId": "getMonitoringStatus",
        "summary": "Real-time monitoring status",
        "description": "Returns the current status of all 41 API endpoints (online/offline, latency, HTTP status). Free endpoint.",
        "responses": {
          "200": {
            "description": "Monitoring status for all endpoints",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/StatusResponse" } } }
          }
        }
      }
    },
    "/api/status/uptime": {
      "get": {
        "operationId": "getUptimeStats",
        "summary": "Uptime statistics",
        "description": "Returns uptime percentage for each endpoint over 24h, 7d, and 30d periods. Free endpoint.",
        "responses": {
          "200": {
            "description": "Uptime percentages per endpoint",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/UptimeResponse" } } }
          }
        }
      }
    },
    "/api/agent/{agentId}": {
      "get": {
        "operationId": "lookupAgent",
        "summary": "ERC-8004 agent identity lookup",
        "description": "Look up an AI agent's on-chain identity via ERC-8004 registry on Base. Returns agent name, description, owner, and reputation. Free endpoint.",
        "parameters": [
          {
            "name": "agentId",
            "in": "path",
            "required": true,
            "description": "The numeric agent ID in the ERC-8004 registry",
            "schema": { "type": "string", "pattern": "^\\d+$" }
          }
        ],
        "responses": {
          "200": {
            "description": "Agent information",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/AgentInfo" } } }
          },
          "404": { "description": "Agent not found" }
        }
      }
    },
    "/api/weather": {
      "get": {
        "operationId": "getWeather",
        "summary": "Weather data for any city (0.02 USDC)",
        "description": "Get current weather data (temperature, wind speed, conditions) for any city worldwide. Costs 0.02 USDC.",
        "parameters": [
          { "name": "city", "in": "query", "required": true, "description": "City name (e.g., Paris, Tokyo, New York)", "schema": { "type": "string", "maxLength": 100 } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "Weather data", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/crypto": {
      "get": {
        "operationId": "getCryptoPrice",
        "summary": "Cryptocurrency price data (0.02 USDC)",
        "description": "Get current price, market cap, and 24h change for any cryptocurrency. Costs 0.02 USDC.",
        "parameters": [
          { "name": "coin", "in": "query", "required": true, "description": "Cryptocurrency ID (e.g., bitcoin, ethereum, solana)", "schema": { "type": "string" } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "Crypto price data", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/joke": {
      "get": {
        "operationId": "getRandomJoke",
        "summary": "Random joke (0.01 USDC)",
        "description": "Returns a random joke (setup + punchline or single-liner). Costs 0.01 USDC.",
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "A random joke", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/search": {
      "get": {
        "operationId": "webSearch",
        "summary": "Web search for LLMs (0.005 USDC)",
        "description": "Returns clean, structured web search results optimized for AI consumption. Costs 0.005 USDC.",
        "parameters": [
          { "name": "q", "in": "query", "required": true, "description": "Search query", "schema": { "type": "string", "maxLength": 200 } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "Search results", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/scrape": {
      "get": {
        "operationId": "scrapeUrl",
        "summary": "Universal URL scraper (0.005 USDC)",
        "description": "Scrapes any URL and returns clean Markdown content, optimized for LLM consumption. Costs 0.005 USDC.",
        "parameters": [
          { "name": "url", "in": "query", "required": true, "description": "URL to scrape", "schema": { "type": "string", "format": "uri" } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "Scraped content in Markdown", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/twitter": {
      "get": {
        "operationId": "getTwitterData",
        "summary": "Twitter/X data (0.005 USDC)",
        "description": "Get Twitter/X user profiles, individual tweets, or search results. Provide one of: user, tweet, or search. Costs 0.005 USDC.",
        "parameters": [
          { "name": "user", "in": "query", "description": "Twitter username (without @)", "schema": { "type": "string" } },
          { "name": "tweet", "in": "query", "description": "Tweet ID or URL", "schema": { "type": "string" } },
          { "name": "search", "in": "query", "description": "Search keyword for tweets", "schema": { "type": "string" } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "Twitter data", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/image": {
      "get": {
        "operationId": "generateImage",
        "summary": "AI image generation DALL-E 3 (0.05 USDC)",
        "description": "Generate an image from a text prompt using DALL-E 3. Returns a URL. Costs 0.05 USDC.",
        "parameters": [
          { "name": "prompt", "in": "query", "required": true, "description": "Image generation prompt", "schema": { "type": "string", "maxLength": 1000 } },
          { "name": "size", "in": "query", "description": "Image size", "schema": { "type": "string", "enum": ["1024x1024", "1024x1792", "1792x1024"], "default": "1024x1024" } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "Generated image URL", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/wikipedia": {
      "get": {
        "operationId": "getWikipediaSummary",
        "summary": "Wikipedia summary (0.005 USDC)",
        "description": "Get a summary of any Wikipedia article. Costs 0.005 USDC.",
        "parameters": [
          { "name": "q", "in": "query", "required": true, "description": "Search term for Wikipedia", "schema": { "type": "string" } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "Wikipedia summary", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/dictionary": {
      "get": {
        "operationId": "getDictionaryDefinition",
        "summary": "Dictionary definitions (0.005 USDC)",
        "description": "Get definitions, phonetics, and examples for any English word. Costs 0.005 USDC.",
        "parameters": [
          { "name": "word", "in": "query", "required": true, "description": "English word to define", "schema": { "type": "string" } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "Word definition", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/countries": {
      "get": {
        "operationId": "getCountryData",
        "summary": "Country information (0.005 USDC)",
        "description": "Get population, capital, languages, currencies, and region for any country. Costs 0.005 USDC.",
        "parameters": [
          { "name": "name", "in": "query", "required": true, "description": "Country name (e.g., France, Japan)", "schema": { "type": "string" } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "Country data", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/github": {
      "get": {
        "operationId": "getGithubData",
        "summary": "GitHub profiles and repos (0.005 USDC)",
        "description": "Get GitHub user profile info or repository statistics. Costs 0.005 USDC.",
        "parameters": [
          { "name": "user", "in": "query", "required": true, "description": "GitHub username", "schema": { "type": "string" } },
          { "name": "repo", "in": "query", "description": "Repository name (optional)", "schema": { "type": "string" } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "GitHub data", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/npm": {
      "get": {
        "operationId": "getNpmPackageInfo",
        "summary": "NPM package metadata (0.005 USDC)",
        "description": "Get metadata for any NPM package. Costs 0.005 USDC.",
        "parameters": [
          { "name": "package", "in": "query", "required": true, "description": "NPM package name (e.g., express, react)", "schema": { "type": "string" } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "NPM package info", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/ip": {
      "get": {
        "operationId": "getIpGeolocation",
        "summary": "IP geolocation (0.005 USDC)",
        "description": "Get geolocation data for an IP address. Costs 0.005 USDC.",
        "parameters": [
          { "name": "address", "in": "query", "required": true, "description": "IP address (IPv4 or IPv6)", "schema": { "type": "string" } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "IP geolocation data", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/time": {
      "get": {
        "operationId": "getWorldTime",
        "summary": "World time by timezone (0.005 USDC)",
        "description": "Get the current date and time for any timezone. Costs 0.005 USDC.",
        "parameters": [
          { "name": "timezone", "in": "query", "required": true, "description": "IANA timezone (e.g., Europe/Paris, America/New_York)", "schema": { "type": "string" } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "Current time data", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/holidays": {
      "get": {
        "operationId": "getPublicHolidays",
        "summary": "Public holidays by country (0.005 USDC)",
        "description": "Get the list of public holidays for a country and year. Costs 0.005 USDC.",
        "parameters": [
          { "name": "country", "in": "query", "required": true, "description": "ISO 3166-1 alpha-2 country code (e.g., US, FR, JP)", "schema": { "type": "string", "minLength": 2, "maxLength": 2 } },
          { "name": "year", "in": "query", "description": "Year (defaults to current year)", "schema": { "type": "integer" } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "Holiday list", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/geocoding": {
      "get": {
        "operationId": "geocodeCity",
        "summary": "City to coordinates (0.005 USDC)",
        "description": "Convert a city name to geographic coordinates. Costs 0.005 USDC.",
        "parameters": [
          { "name": "city", "in": "query", "required": true, "description": "City name", "schema": { "type": "string" } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "Geocoding result", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/airquality": {
      "get": {
        "operationId": "getAirQuality",
        "summary": "Air quality index (0.005 USDC)",
        "description": "Get the air quality index (AQI) and pollutant levels for a location. Costs 0.005 USDC.",
        "parameters": [
          { "name": "lat", "in": "query", "required": true, "description": "Latitude", "schema": { "type": "number" } },
          { "name": "lon", "in": "query", "required": true, "description": "Longitude", "schema": { "type": "number" } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "Air quality data", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/quote": {
      "get": {
        "operationId": "getRandomQuote",
        "summary": "Random advice quote (0.005 USDC)",
        "description": "Returns a random piece of advice or inspirational quote. Costs 0.005 USDC.",
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "A random quote", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/facts": {
      "get": {
        "operationId": "getRandomFact",
        "summary": "Random fun fact (0.005 USDC)",
        "description": "Returns a random interesting fact. Costs 0.005 USDC.",
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "A random fact", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/translate": {
      "get": {
        "operationId": "translateText",
        "summary": "Translate text 90+ languages (0.005 USDC)",
        "description": "Translate text from one language to another. Supports 90+ language pairs. Costs 0.005 USDC.",
        "parameters": [
          { "name": "text", "in": "query", "required": true, "description": "Text to translate", "schema": { "type": "string" } },
          { "name": "from", "in": "query", "description": "Source language code (e.g., en, fr). Defaults to 'en'.", "schema": { "type": "string", "default": "en" } },
          { "name": "to", "in": "query", "required": true, "description": "Target language code (e.g., fr, es, de, ja)", "schema": { "type": "string" } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "Translated text", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/summarize": {
      "get": {
        "operationId": "summarizeText",
        "summary": "AI text summarization (0.01 USDC)",
        "description": "Summarize a long text using AI (GPT-4o-mini). Costs 0.01 USDC.",
        "parameters": [
          { "name": "text", "in": "query", "required": true, "description": "Text to summarize", "schema": { "type": "string" } },
          { "name": "maxLength", "in": "query", "description": "Maximum summary length in characters", "schema": { "type": "integer", "default": 200 } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "Summarized text", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/code": {
      "post": {
        "operationId": "executeCode",
        "summary": "Execute code in 50+ languages (0.005 USDC)",
        "description": "Execute code in 50+ programming languages via a sandboxed environment. Costs 0.005 USDC.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["language", "code"],
                "properties": {
                  "language": { "type": "string", "description": "Programming language (e.g., python, javascript, go, rust)" },
                  "code": { "type": "string", "description": "Source code to execute" }
                }
              }
            }
          }
        },
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "Code execution result", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/dns": {
      "get": {
        "operationId": "dnsLookup",
        "summary": "DNS record lookup (0.003 USDC)",
        "description": "Look up DNS records (A, AAAA, MX, TXT, CNAME, NS) for a domain. Costs 0.003 USDC.",
        "parameters": [
          { "name": "domain", "in": "query", "required": true, "description": "Domain name (e.g., google.com)", "schema": { "type": "string" } },
          { "name": "type", "in": "query", "description": "DNS record type. Defaults to A.", "schema": { "type": "string", "enum": ["A", "AAAA", "MX", "TXT", "CNAME", "NS"], "default": "A" } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "DNS records", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/currency": {
      "get": {
        "operationId": "convertCurrency",
        "summary": "Currency conversion ECB rates (0.005 USDC)",
        "description": "Convert between currencies using European Central Bank exchange rates. Costs 0.005 USDC.",
        "parameters": [
          { "name": "amount", "in": "query", "required": true, "description": "Amount to convert", "schema": { "type": "number" } },
          { "name": "from", "in": "query", "required": true, "description": "Source currency (e.g., USD, EUR)", "schema": { "type": "string" } },
          { "name": "to", "in": "query", "required": true, "description": "Target currency (e.g., EUR, JPY)", "schema": { "type": "string" } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "Conversion result", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    },
    "/api/sentiment": {
      "get": {
        "operationId": "analyzeSentiment",
        "summary": "AI sentiment analysis (0.005 USDC)",
        "description": "Analyze the sentiment of text using AI. Returns positive, negative, or neutral with confidence score. Costs 0.005 USDC.",
        "parameters": [
          { "name": "text", "in": "query", "required": true, "description": "Text to analyze", "schema": { "type": "string" } }
        ],
        "responses": {
          "402": { "$ref": "#/components/responses/PaymentRequired" },
          "200": { "description": "Sentiment analysis result", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SuccessResponse" } } } }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "MarketplaceInfo": {
        "type": "object",
        "properties": {
          "name": { "type": "string", "example": "x402 Bazaar" },
          "description": { "type": "string" },
          "network": { "type": "string", "example": "Base" },
          "total_services": { "type": "integer", "example": 70 },
          "endpoints": { "type": "object", "description": "Map of all 41 endpoint paths to descriptions with prices" },
          "protocol": { "type": "string", "example": "x402 - HTTP 402 Payment Required" }
        }
      },
      "HealthResponse": {
        "type": "object",
        "properties": {
          "status": { "type": "string", "example": "ok" },
          "network": { "type": "string", "example": "Base" },
          "networks": { "type": "array", "items": { "type": "object", "properties": { "network": { "type": "string" }, "label": { "type": "string" }, "chainId": { "type": "integer" } } } },
          "timestamp": { "type": "string", "format": "date-time" }
        }
      },
      "StatusResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "checked_at": { "type": "string", "format": "date-time" },
          "total": { "type": "integer" },
          "online": { "type": "integer" },
          "offline": { "type": "integer" },
          "endpoints": { "type": "array", "items": { "type": "object", "properties": { "endpoint": { "type": "string" }, "label": { "type": "string" }, "status": { "type": "string", "enum": ["online", "offline"] }, "latency": { "type": "integer" }, "http_status": { "type": "integer" } } } }
        }
      },
      "UptimeResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "period": { "type": "string" },
          "endpoints": { "type": "array", "items": { "type": "object", "properties": { "endpoint": { "type": "string" }, "label": { "type": "string" }, "uptime_24h": { "type": "number" }, "uptime_7d": { "type": "number" }, "uptime_30d": { "type": "number" }, "total_checks": { "type": "integer" } } } }
        }
      },
      "AgentInfo": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "agentId": { "type": "string" },
          "name": { "type": "string" },
          "description": { "type": "string" },
          "owner": { "type": "string" },
          "reputation": { "type": "integer" }
        }
      },
      "PaymentRequired": {
        "type": "object",
        "description": "Returned when payment is required. Contains details for making a USDC payment on Base blockchain.",
        "properties": {
          "error": { "type": "string", "example": "Payment Required" },
          "x402": {
            "type": "object",
            "properties": {
              "version": { "type": "string", "example": "1" },
              "payload": {
                "type": "object",
                "properties": {
                  "amount": { "type": "string", "description": "Amount in USDC micro-units (6 decimals)", "example": "5000" },
                  "amountHuman": { "type": "string", "description": "Human-readable USDC amount", "example": "0.005 USDC" },
                  "recipient": { "type": "string", "description": "Wallet address to send USDC to", "example": "0xfb1c478BD5567BdcD39782E0D6D23418bFda2430" },
                  "chain": { "type": "string", "example": "base" },
                  "chainId": { "type": "integer", "example": 8453 },
                  "token": { "type": "string", "example": "USDC" },
                  "tokenAddress": { "type": "string", "example": "0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913" }
                }
              }
            }
          },
          "instructions": { "type": "string", "description": "How to complete payment and retry the request" }
        }
      },
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean", "example": true }
        },
        "description": "Response varies by endpoint. Always includes success:true and endpoint-specific data."
      }
    },
    "responses": {
      "PaymentRequired": {
        "description": "Payment required. Send USDC on Base to the specified wallet address, then retry with X-Payment-TxHash header.",
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/PaymentRequired" }
          }
        }
      }
    }
  }
}